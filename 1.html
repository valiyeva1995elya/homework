<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div class="block">
        <p>Login</p>
        <input class="inf em" type="text" placeholder="email">
        <input class="inf ps" type="password" name="" id="" placeholder="password">
        <div class="block2">
            <div class="rm-block">
                <input id="checkb" type="checkbox">
                <span>Remember me</span>
            </div>
            <span> <a href="./2.html">registration</a></span>
        </div>


        <button onclick="singIn()" class="btn">Sign up</button>


    </div>
   
    <script>


        const validateEmail = (email) => {
            return String(email)
                .toLowerCase()
                .match(
                    /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
                );
        };
        const validatePassword = (password) => {
            return String(password)
                .match(
                    /^\S*(?=.*[A-Z])(?=.*[0-9])(?=.*[/$!*])[a-zA-Z0-9*/$!]{8,}\S*$/g
                );
        };
        const validateAge = (age) => {
            return String(age)
                .match(
                    /^[1-9][0-9]$|^[1-9]$|^100$/
                );
        };

        function singIn() {
            let arrCheckUser = JSON.parse(localStorage.getItem('users'))
            let email = document.querySelector('.em').value
            let password = document.querySelector('.ps').value
            let check = document.querySelector('#checkb')

            for (let i = 0; i <= arrCheckUser.length - 1; i++) {
                if (!validateEmail(email)) {
                    alert("Incorrect email!")
                    break
                } else if (email == arrCheckUser[i].email && password == arrCheckUser[i].password) {
                    localStorage.setItem('saveUser', JSON.stringify(arrCheckUser[i]))
                    if (check.checked == true) {
                        let a = { checkbox: "true" }
                        let saveUserCheck = JSON.parse(localStorage.getItem('saveUser'))
                        saveUserCheck = { ...saveUserCheck, ...a };
                        localStorage.setItem('saveUser', JSON.stringify(saveUserCheck))
                        document.location.href = './3.html'
                    } else
                        localStorage.setItem('saveUser', JSON.stringify(arrCheckUser[i]))
                    document.location.href = './3.html'
                }
            }
        }


    </script>

</body>

</html>